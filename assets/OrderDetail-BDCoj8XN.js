import{c as w,d as C,u as S,e as B,r as o,j as e,m as d,L as k}from"./index-CZ-q80kR.js";const z=()=>{const{id:l}=w(),g=C(),{user:a}=S(),{addToCart:u}=B(),[t,p]=o.useState(null),[v,x]=o.useState(!0),[c,h]=o.useState(!1),m=()=>{if(!window.confirm("Are you sure you want to cancel this order?"))return;h(!0),fetch(`https://techorbit-api.onrender.com/api/orders/${l}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"Cancelled"})}).then(s=>s.json()).then(s=>{s.message==="updated"&&(p(r=>({...r,status:"Cancelled"})),alert("Order Cancelled Successfully")),h(!1)})},f=i=>{const s={id:i.product_id,title:i.title,image:i.image,price:i.price};u(s),g("/cart")},b=()=>{window.print()};return o.useEffect(()=>{a&&fetch(`https://techorbit-api.onrender.com/api/orders/detail/${l}`).then(s=>s.json()).then(s=>{s.message==="success"&&p(s.data),x(!1)}).catch(()=>x(!1))},[l,a]),a?v?e.jsx("div",{className:"container",children:"Loading order details..."}):t?t.user_id!==a.id&&a.role!=="admin"&&a.role!=="seller"?e.jsx("div",{className:"container",children:"Access Denied"}):e.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"container",style:{maxWidth:"800px"},children:[e.jsx("style",{children:`
                    @media print {
                        body * {
                            visibility: hidden;
                        }
                        .invoice-content, .invoice-content * {
                            visibility: visible;
                        }
                        .invoice-content {
                            position: absolute;
                            left: 0;
                            top: 0;
                            width: 100%;
                        }
                        .no-print {
                            display: none !important;
                        }
                    }
                `}),e.jsxs("div",{className:"invoice-content",style:{background:"white",padding:"20px",borderRadius:"8px"},children:[e.jsx("div",{style:{borderBottom:"2px solid var(--border)",paddingBottom:"20px",marginBottom:"20px"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"28px",fontWeight:"800",margin:0},children:"INVOICE"}),e.jsxs("p",{style:{margin:"5px 0",color:"#64748b"},children:["Order #",t.id]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("h2",{style:{fontSize:"24px",fontWeight:"bold",color:"var(--primary)",margin:0},children:"TechOrbit"}),e.jsxs("p",{style:{margin:"5px 0",fontSize:"14px"},children:["Date: ",new Date(t.date).toLocaleDateString()]})]})]})}),e.jsxs("div",{className:"no-print",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px"},children:[e.jsx("h2",{style:{margin:0},children:"Order Details"}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsx("button",{onClick:b,className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"5px"},children:"üñ®Ô∏è Invoice"}),t.status==="Processing"&&e.jsx("button",{onClick:m,disabled:c,className:"btn",style:{background:"var(--error)",color:"white",border:"none",opacity:c?.7:1},children:c?"Cancelling...":"Cancel Order"}),e.jsx(k,{to:"/orders",className:"btn btn-secondary",style:{textDecoration:"none",padding:"10px 20px"},children:"Back to Orders"})]})]}),e.jsxs("div",{style:{background:"var(--surface)",border:"1px solid var(--border)",borderRadius:"8px",overflow:"hidden",marginBottom:"30px"},children:[e.jsxs("div",{className:"no-print",style:{padding:"20px",background:"var(--surface-hover)",borderBottom:"1px solid var(--border)",display:"flex",justifyContent:"space-between"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Placed on:"})," ",new Date(t.date).toLocaleDateString()]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Status:"})," ",e.jsx("span",{style:{fontWeight:"bold",color:"var(--primary)"},children:t.status})]})]}),e.jsx("div",{className:"no-print",style:{padding:"35px 20px",borderBottom:"1px solid var(--border)"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",position:"relative",maxWidth:"600px",margin:"0 auto"},children:[e.jsx("div",{style:{position:"absolute",top:"15px",left:"0",height:"4px",background:"var(--border)",width:"100%",borderRadius:"4px",zIndex:0}}),e.jsx(d.div,{initial:{width:0},animate:{width:t.status.toLowerCase()==="processing"||t.status.toLowerCase()==="placed"?"0%":t.status.toLowerCase()==="shipped"?"50%":"100%"},transition:{duration:1,ease:"easeOut"},style:{position:"absolute",top:"15px",left:"0",height:"4px",background:"#10b981",borderRadius:"4px",zIndex:0}}),["Placed","Shipped","Delivered"].map((i,s)=>{const r=t.status.toLowerCase(),y=r==="processing"||r==="placed"?0:r==="shipped"?1:2,n=y>=s,j=y===s;return e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",zIndex:1,position:"relative"},children:[e.jsx(d.div,{initial:{scale:.8},animate:{scale:n?1:.8},style:{width:"32px",height:"32px",borderRadius:"50%",background:n?"#10b981":"var(--surface)",color:n?"white":"var(--text-secondary)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",fontWeight:"bold",border:n?"4px solid #10b981":"2px solid var(--border)",boxShadow:j?"0 0 0 4px rgba(16, 185, 129, 0.2)":"none"},children:n?"‚úì":s+1}),e.jsxs("div",{style:{textAlign:"center",marginTop:"8px"},children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:"700",color:n?"var(--text-main)":"var(--text-secondary)"},children:i==="Placed"&&r==="processing"?"Processing":i}),n&&e.jsx("div",{style:{fontSize:"11px",color:"var(--success)"},children:s===0?new Date(t.date).toLocaleDateString():s===1&&r==="shipped"?"Today":""})]})]},i)})]})}),e.jsxs("div",{style:{padding:"20px"},children:[e.jsx("h3",{style:{fontSize:"16px",marginBottom:"15px",borderBottom:"1px solid #eee",paddingBottom:"10px"},children:"Items Ordered"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:t.items.map(i=>e.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"center",borderBottom:"1px solid var(--border)",paddingBottom:"15px"},children:[e.jsx("img",{src:i.image,alt:i.title,style:{width:"60px",height:"60px",objectFit:"contain"}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:"500"},children:i.title}),e.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:["x",i.quantity]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{fontWeight:"bold"},children:["$",i.price]}),e.jsx("button",{className:"no-print",onClick:()=>f(i),style:{fontSize:"12px",color:"var(--primary)",background:"transparent",border:"1px solid var(--primary)",borderRadius:"4px",padding:"4px 8px",marginTop:"5px",cursor:"pointer"},children:"Buy Again"})]})]},i.id))}),e.jsxs("div",{style:{marginTop:"20px",display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"16px",marginBottom:"5px"},children:"Shipping Address"}),e.jsx("p",{style:{color:"var(--text-secondary)",lineHeight:"1.5",whiteSpace:"pre-wrap"},children:t.shipping_address||"N/A"})]}),e.jsxs("div",{style:{textAlign:"right",minWidth:"200px"},children:[e.jsxs("div",{style:{borderBottom:"1px solid var(--border)",paddingBottom:"10px",marginBottom:"10px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px"},children:[e.jsx("span",{style:{color:"var(--text-secondary)"},children:"Subtotal:"}),e.jsxs("span",{children:["$",t.total.toFixed(2)]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px"},children:[e.jsx("span",{style:{color:"var(--text-secondary)"},children:"Shipping:"}),e.jsx("span",{children:"Free"})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px"},children:[e.jsx("span",{style:{fontWeight:"bold"},children:"Total:"}),e.jsxs("span",{style:{fontSize:"20px",fontWeight:"bold",color:"var(--primary)"},children:["$",t.total.toFixed(2)]})]}),e.jsxs("div",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:["Payment: ",t.payment_method]})]})]})]}),(t.status.toLowerCase()==="shipped"||t.status.toLowerCase()==="out for delivery")&&e.jsxs("div",{className:"no-print",style:{padding:"20px",background:"var(--surface)",borderTop:"1px solid var(--border)",position:"relative",overflow:"hidden"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[e.jsxs("h3",{style:{margin:0,display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("span",{style:{width:"10px",height:"10px",background:"red",borderRadius:"50%",boxShadow:"0 0 10px red",animation:"pulse 1s infinite"}}),"Live Delivery Tracking"]}),e.jsx("span",{style:{fontSize:"12px",color:"var(--text-secondary)",background:"var(--surface-hover)",padding:"4px 10px",borderRadius:"12px"},children:"Updating live..."})]}),e.jsxs("div",{style:{height:"250px",background:"var(--surface-hover)",borderRadius:"12px",position:"relative",overflow:"hidden",backgroundImage:"radial-gradient(circle, var(--text-light) 1px, transparent 1px)",backgroundSize:"20px 20px",opacity:.8},children:[e.jsx("div",{style:{position:"absolute",top:"50%",left:"10%",right:"10%",height:"8px",background:"var(--text-secondary)",transform:"translateY(-50%)",borderRadius:"4px",border:"2px dashed var(--border)"}}),e.jsx(d.div,{animate:{left:["10%","80%","15%"]},transition:{duration:20,repeat:1/0,ease:"linear"},style:{position:"absolute",top:"50%",left:"10%",transform:"translate(-50%, -50%)",fontSize:"30px",zIndex:10},children:"üöö"}),e.jsx("div",{style:{position:"absolute",top:"50%",right:"8%",transform:"translateY(-50%)",fontSize:"30px"},children:"üè†"})]}),e.jsx("style",{children:"@keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }"})]})]})]})]}):e.jsx("div",{className:"container",children:"Order not found."}):e.jsx("div",{className:"container",children:"Please login."})};export{z as default};
