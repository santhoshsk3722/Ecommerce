import{u as f,d as j,r as p,j as e}from"./index-Ddy5vbIH.js";const C=()=>{const{user:g}=f(),x=j(),[t,s]=p.useState({title:"",price:"",category:"electronics",image:"",description:"",stock:10}),[i,c]=p.useState([]),[d,u]=p.useState(!1),b=()=>{c([...i,{name:"",options:""}])},h=(r,a,o)=>{const n=[...i];n[r][a]=o,c(n)},y=r=>{c(i.filter((a,o)=>o!==r))},v=async r=>{r.preventDefault();try{const a=i.map(l=>({name:l.name,options:l.options.split(",").map(m=>m.trim()).filter(Boolean)})).filter(l=>l.name&&l.options.length>0);(await(await fetch("https://techorbit-api.onrender.com/api/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...t,seller_id:g.id,variants:a})})).json()).message==="success"?(alert("Product added successfully!"),x("/seller")):alert("Failed to add product")}catch(a){console.error(a)}};return e.jsxs("div",{style:{maxWidth:"600px",margin:"40px auto",padding:"30px",background:"var(--surface)",borderRadius:"12px",boxShadow:"var(--shadow-lg)"},children:[e.jsx("h2",{style:{marginBottom:"25px",color:"var(--text-main)"},children:"Add New Product"}),e.jsxs("form",{onSubmit:v,style:{display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",color:"var(--text-secondary)"},children:"Product Title"}),e.jsx("input",{placeholder:"e.g. Wireless Headphones",value:t.title,onChange:r=>s({...t,title:r.target.value}),required:!0,style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid var(--border)",background:"var(--surface-hover)",color:"var(--text-main)"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",color:"var(--text-secondary)"},children:"Price ($)"}),e.jsx("input",{type:"number",placeholder:"99.99",value:t.price,onChange:r=>s({...t,price:r.target.value}),required:!0,style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid var(--border)",background:"var(--surface-hover)",color:"var(--text-main)"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",color:"var(--text-secondary)"},children:"Stock Quantity"}),e.jsx("input",{type:"number",placeholder:"10",value:t.stock,onChange:r=>s({...t,stock:r.target.value}),required:!0,style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid var(--border)",background:"var(--surface-hover)",color:"var(--text-main)"}})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",color:"var(--text-secondary)"},children:"Category"}),e.jsxs("select",{value:t.category,onChange:r=>s({...t,category:r.target.value}),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid var(--border)",background:"var(--surface-hover)",color:"var(--text-main)"},children:[e.jsx("option",{value:"electronics",children:"Electronics"}),e.jsx("option",{value:"fashion",children:"Fashion"}),e.jsx("option",{value:"home",children:"Home"}),e.jsx("option",{value:"books",children:"Books"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",color:"var(--text-secondary)"},children:"Image URL"}),e.jsx("input",{placeholder:"https://images.unsplash.com/...",value:t.image,onChange:r=>s({...t,image:r.target.value}),required:!0,style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid var(--border)",background:"var(--surface-hover)",color:"var(--text-main)"}})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[e.jsx("label",{style:{color:"var(--text-secondary)"},children:"Description"}),e.jsx("button",{type:"button",onClick:async()=>{if(!t.title){alert("Please enter a product title first");return}u(!0);try{const o=await(await fetch("https://techorbit-api.onrender.com/api/ai/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:t.title,category:t.category})})).json();o.message==="success"&&s(n=>({...n,description:o.description}))}catch(r){console.error(r),alert("AI Generation Failed")}finally{u(!1)}},disabled:d,style:{background:"linear-gradient(135deg, #6366f1, #8b5cf6)",color:"white",border:"none",padding:"6px 12px",borderRadius:"20px",fontSize:"12px",cursor:d?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"6px",opacity:d?.7:1},children:d?"Thinking...":"✨ AI Write"})]}),e.jsx("textarea",{rows:"4",placeholder:"Describe your product manually or use AI...",value:t.description,onChange:r=>s({...t,description:r.target.value}),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid var(--border)",background:"var(--surface-hover)",color:"var(--text-main)",transition:"all 0.3s"}})]}),e.jsxs("div",{style:{background:"var(--surface-hover)",padding:"15px",borderRadius:"8px",border:"1px solid var(--border)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[e.jsx("label",{style:{fontWeight:"bold",color:"var(--text-main)"},children:"Product Variants"}),e.jsx("button",{type:"button",onClick:b,style:{fontSize:"12px",padding:"4px 8px",background:"var(--primary)",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"+ Add Variant"})]}),i.map((r,a)=>e.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px"},children:[e.jsx("input",{placeholder:"Name (e.g. Size)",value:r.name,onChange:o=>h(a,"name",o.target.value),style:{flex:1,padding:"8px",borderRadius:"4px",border:"1px solid var(--border)"}}),e.jsx("input",{placeholder:"Options (S, M, L)",value:r.options,onChange:o=>h(a,"options",o.target.value),style:{flex:2,padding:"8px",borderRadius:"4px",border:"1px solid var(--border)"}}),e.jsx("button",{type:"button",onClick:()=>y(a),style:{color:"red",background:"none",border:"none",cursor:"pointer"},children:"✕"})]},a)),i.length===0&&e.jsx("p",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:"No variants added (e.g. Sizes, Colors)."})]}),e.jsxs("div",{style:{display:"flex",gap:"15px",marginTop:"10px"},children:[e.jsx("button",{type:"submit",className:"btn btn-primary",style:{flex:1,padding:"14px"},children:"Publish Product"}),e.jsx("button",{type:"button",onClick:()=>x("/seller"),className:"btn btn-secondary",style:{flex:1,padding:"14px"},children:"Cancel"})]})]})]})};export{C as default};
