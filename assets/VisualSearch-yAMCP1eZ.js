import{d as y,r as o,j as e,m as s}from"./index-BwPIQvI5.js";const j=()=>{const h=y(),[l,r]=o.useState(!1),[n,c]=o.useState(!1),[d,x]=o.useState(null),m=a=>{a.preventDefault(),r(!1);const t=a.dataTransfer.files[0];t&&t.type.startsWith("image/")&&p(t)},f=a=>{const t=a.target.files[0];t&&p(t)},p=async a=>{const t=new FileReader;t.onload=i=>x(i.target.result),t.readAsDataURL(a),c(!0);try{const g=await(await fetch("https://techorbit-api.onrender.com/api/search/visual",{method:"POST"})).json();g.message==="success"&&h(`/?search=${g.keyword}`)}catch(i){console.error("Visual search failed:",i),alert("Failed to analyze image. Please try again."),c(!1)}};return e.jsxs("div",{className:"container",style:{padding:"60px 20px",minHeight:"80vh",display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{textAlign:"center",marginBottom:"40px"},children:[e.jsx("h1",{style:{fontSize:"36px",fontWeight:"800",marginBottom:"10px"},children:"Visual Search"}),e.jsx("p",{style:{color:"#64748b",fontSize:"18px"},children:"Search for products by uploading an image."})]}),e.jsx(s.div,{className:"card",onDragOver:a=>{a.preventDefault(),r(!0)},onDragLeave:()=>r(!1),onDrop:m,style:{width:"100%",maxWidth:"600px",height:"400px",border:"3px dashed",borderColor:l?"var(--accent)":n?"var(--success)":"#cbd5e1",borderRadius:"20px",background:l?"#f0f9ff":"white",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",cursor:"pointer",position:"relative",overflow:"hidden",transition:"all 0.3s"},children:d?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:d,alt:"Upload Preview",style:{width:"100%",height:"100%",objectFit:"contain",padding:"20px"}}),n&&e.jsx(s.div,{style:{position:"absolute",top:0,left:0,width:"100%",height:"5px",background:"var(--accent)",boxShadow:"0 0 15px var(--accent)"},animate:{top:["0%","100%","0%"]},transition:{duration:2,repeat:1/0,ease:"linear"}})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{fontSize:"64px",marginBottom:"20px",opacity:.5},children:"ðŸ“¸"}),e.jsx("h3",{style:{fontSize:"20px",marginBottom:"10px"},children:"Drag & Drop an image here"}),e.jsx("p",{style:{color:"#94a3b8",marginBottom:"30px"},children:"or click to upload"}),e.jsx("input",{type:"file",accept:"image/*",onChange:f,style:{position:"absolute",width:"100%",height:"100%",opacity:0,cursor:"pointer"}})]})}),n&&e.jsxs(s.div,{initial:{opacity:0},animate:{opacity:1},style:{marginTop:"30px",fontWeight:"600",color:"var(--text-secondary)",display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("span",{className:"spinner",style:{width:"20px",height:"20px",border:"2px solid #ddd",borderTopColor:"var(--accent)",borderRadius:"50%",display:"inline-block",animation:"spin 1s linear infinite"}}),"Analyzing image features..."]}),e.jsx("style",{children:"@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }"})]})};export{j as default};
