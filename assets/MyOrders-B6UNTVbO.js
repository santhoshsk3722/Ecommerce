import{j as e,u as f,a as g,r as p,A as v,m,L as j}from"./index-BwPIQvI5.js";const b=({status:r,trackingId:o,courier:l,estimatedDelivery:i})=>{const d=["Processing","Shipped","Out for Delivery","Delivered"],a=(r||"").toLowerCase();let s=d.findIndex(n=>n.toLowerCase()===a);return s===-1&&(s=0),a==="cancelled"?e.jsx("div",{style:{padding:"20px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid var(--error)",borderRadius:"8px",color:"var(--error)",textAlign:"center",fontWeight:"bold"},children:"ðŸš« Order Cancelled"}):e.jsxs("div",{style:{padding:"20px",width:"100%",background:"var(--surface-hover)",borderRadius:"8px",marginTop:"10px"},children:[(o||i)&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"30px",fontSize:"14px",flexWrap:"wrap",gap:"10px"},children:[o&&e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-secondary)"},children:"Tracking ID: "}),e.jsx("span",{style:{fontWeight:"bold"},children:o}),l&&e.jsxs("span",{style:{marginLeft:"5px",color:"var(--primary)",fontWeight:"bold"},children:["(",l,")"]})]}),i&&e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-secondary)"},children:"Expected Delivery: "}),e.jsx("span",{style:{fontWeight:"bold"},children:i})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",position:"relative",marginTop:"10px"},children:[e.jsx("div",{style:{position:"absolute",top:"15px",left:"0",right:"0",height:"4px",background:"var(--border)",zIndex:0}}),e.jsx("div",{style:{position:"absolute",top:"15px",left:"0",width:`${s/(d.length-1)*100}%`,height:"4px",background:"var(--success)",zIndex:0,transition:"width 0.5s ease-in-out"}}),d.map((n,x)=>{const t=x<=s;return e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",zIndex:1,width:"25%"},children:[e.jsx("div",{style:{width:"30px",height:"30px",borderRadius:"50%",background:t?"var(--success)":"var(--surface)",border:t?"none":"4px solid var(--border)",boxShadow:"0 0 0 4px var(--surface-hover)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",marginBottom:"10px",transition:"background 0.3s"},children:t&&"âœ“"}),e.jsx("span",{style:{fontSize:"12px",textAlign:"center",color:t?"var(--success)":"var(--text-secondary)",fontWeight:t?"600":"normal"},children:n})]},n)})]})]})},S=()=>{const{user:r}=f(),{showToast:o}=g(),[l,i]=p.useState([]),[d,a]=p.useState(!0),[s,n]=p.useState(null);p.useEffect(()=>{if(!r)return;fetch(`https://techorbit-api.onrender.com/api/orders/${r.id}`).then(c=>c.json()).then(c=>{c.message==="success"&&i(c.data),a(!1)}).catch(()=>a(!1))},[r]);const x=t=>{if(!window.confirm("Are you sure you want to cancel this order?"))return;n(t),fetch(`https://techorbit-api.onrender.com/api/orders/${t}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"Cancelled"})}).then(h=>h.json()).then(h=>{h.message==="updated"&&(o("Order Cancelled Successfully"),i(y=>y.map(u=>u.id===t?{...u,status:"Cancelled"}:u))),n(null)})};return r?d?e.jsx("div",{className:"container",style:{padding:"50px"},children:"Loading orders..."}):l.length===0?e.jsx("div",{className:"container",style:{padding:"50px",textAlign:"center"},children:"No orders found."}):e.jsxs("div",{className:"container",style:{paddingBottom:"50px"},children:[e.jsx("h2",{style:{marginBottom:"30px",fontWeight:"800"},children:"My Orders"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"30px"},children:e.jsx(v,{children:l.map(t=>e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0},className:"card",style:{background:"var(--surface)",border:"1px solid var(--border)",borderRadius:"var(--radius-lg)",overflow:"hidden"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",background:"var(--surface-hover)",borderBottom:"1px solid var(--border)"},children:[e.jsxs("div",{style:{display:"flex",gap:"20px",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"5px"},children:[e.jsx("span",{style:{fontSize:"12px",color:"var(--text-secondary)",textTransform:"uppercase"},children:"Order Placed"}),e.jsx("span",{style:{fontWeight:"600"},children:new Date(t.date).toLocaleDateString()})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"5px"},children:[e.jsx("span",{style:{fontSize:"12px",color:"var(--text-secondary)",textTransform:"uppercase"},children:"Total"}),e.jsxs("span",{style:{fontWeight:"600"},children:["$",t.total.toFixed(2)]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"5px"},children:[e.jsx("span",{style:{fontSize:"12px",color:"var(--text-secondary)",textTransform:"uppercase"},children:"Ship To"}),e.jsx("span",{style:{color:"var(--primary)",cursor:"pointer"},children:r.name})]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{fontSize:"12px",color:"var(--text-secondary)",textTransform:"uppercase"},children:["Order # ",t.id]}),t.payment_method&&e.jsxs("div",{style:{marginTop:"5px",fontSize:"12px",fontWeight:"bold",color:"var(--success)"},children:["Starts with ",t.payment_method]}),e.jsx(j,{to:`/order/${t.id}`,style:{display:"block",marginTop:"5px",fontSize:"12px",color:"var(--primary)",textDecoration:"none",fontWeight:"bold"},children:"View Details â†’"})]})]}),e.jsxs("div",{style:{padding:"20px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"20px"},children:[e.jsxs("div",{children:[e.jsxs("h4",{style:{margin:0,marginBottom:"5px",color:t.status==="Cancelled"?"var(--error)":"var(--text-main)"},children:["Status: ",t.status]}),e.jsx("p",{style:{margin:0,color:"var(--text-secondary)",fontSize:"14px"},children:t.status==="Delivered"?"Package was left near the front door":"Updated recently"})]}),t.status==="Processing"&&e.jsx("button",{onClick:()=>x(t.id),disabled:s===t.id,style:{padding:"8px 16px",border:"1px solid var(--error)",color:"var(--error)",background:"var(--surface)",borderRadius:"4px",cursor:"pointer",fontWeight:"600",opacity:s===t.id?.5:1},children:s===t.id?"Cancelling...":"Cancel Order"})]}),e.jsx(b,{status:t.status||"Processing",trackingId:t.tracking_id,courier:t.courier_name,estimatedDelivery:t.estimated_delivery})]})]},t.id))})})]}):e.jsx("div",{className:"container",style:{textAlign:"center",padding:"50px"},children:"Please login to view orders."})};export{S as default};
