import{u as y,a as v,d as j,r as x,f as k,j as e,m as T}from"./index-CznppuXX.js";import{e as C}from"./index-DtVQIX_c.js";const O=()=>{const{login:l}=y(),{showToast:h}=v(),n=j(),[c,o]=x.useState(!1),s=k({onSuccess:async i=>{o(!0);try{const p=await(await fetch("https://www.googleapis.com/oauth2/v3/userinfo",{headers:{Authorization:`Bearer ${i.access_token}`}})).json(),u=await(await fetch("https://techorbit-api.onrender.com/api/google-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:p.email,name:p.name,picture:p.picture,google_id:p.sub})})).json();u.message==="success"?(l(u.user),h(`Welcome, ${u.user.name}!`,"success"),n("/")):h("Google Login Failed: "+u.error,"error")}catch(t){console.error("Google Login Error:",t),h("Google Login Failed","error")}finally{o(!1)}},onError:i=>{console.error("Google Login Failed:",i),h("Google Login Failed","error")}});return e.jsx("button",{type:"button",onClick:()=>s(),disabled:c,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",width:"100%",padding:"12px",background:"white",border:"1px solid #ddd",borderRadius:"4px",cursor:c?"wait":"pointer",fontSize:"14px",fontWeight:"500",color:"#555",transition:"background 0.2s"},onMouseOver:i=>!c&&(i.currentTarget.style.background="#f9f9f9"),onMouseOut:i=>!c&&(i.currentTarget.style.background="white"),children:c?e.jsx("span",{children:"Connecting to Google..."}):e.jsxs(e.Fragment,{children:[e.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google",style:{width:"18px",height:"18px"}}),e.jsx("span",{children:"Sign in with Google"})]})})},I=()=>{const[l,h]=x.useState(!0),[n,c]=x.useState("email"),[o,s]=x.useState({name:"",email:"",password:"",phone:"",otp:""}),{login:i}=y(),{showToast:t}=v(),p=j(),[g,m]=x.useState(0),u=async r=>{if(r.preventDefault(),n==="email"){if(l){try{const a=await(await fetch("https://techorbit-api.onrender.com/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})).json();a.message==="success"?(i(a.user),t("Welcome!"),p(a.user.role==="seller"?"/seller":a.user.role==="admin"?"/admin":"/")):t(a.message||"Error","error")}catch{t("Connection failed","error")}return}if(g===0){const d=Math.floor(1e3+Math.random()*9e3).toString(),f="service_izdou3i",a="template_pok8ep8",w="JDNQ5ZSPrwHYcaEa6";t("Sending Verification Code...","info");try{await C.send(f,a,{to_name:o.name,to_email:o.email,otp:d,message:`Your verification code is ${d}`},w),t(`OTP sent to ${o.email}`,"success"),s(b=>({...b,generatedOtp:d})),m(1)}catch(b){console.error("EmailJS Failed, falling back to Demo:",b),t(`Demo OTP: ${d} (Email Failed)`,"info"),s(S=>({...S,generatedOtp:d})),m(1)}}else if(o.otp===o.generatedOtp)try{const a=await(await fetch("https://techorbit-api.onrender.com/api/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:o.name,email:o.email,password:o.password})})).json();a.message==="success"?(i(a.user),t("Account Verified! Welcome!","success"),p("/")):t(a.message||"Signup Error","error")}catch{t("Connection failed","error")}else t("Invalid OTP. Please try again.","error")}else if(g===0){if(o.phone.length<10)return t("Invalid Phone","error");t(`OTP sent to ${o.phone}`),m(1)}else o.otp==="1234"?(i({id:999,name:"Phone User",email:"phone@user.com",role:"user"}),t("Welcome!"),p("/")):t("Invalid OTP","error")};return e.jsxs("div",{style:{display:"flex",height:"100vh",width:"100vw",overflow:"hidden",position:"fixed",top:0,left:0,zIndex:2e3},children:[e.jsxs("div",{style:{flex:1,background:"linear-gradient(135deg, #0f172a 0%, #1e293b 100%)",display:"flex",flexDirection:"column",justifyContent:"center",padding:"60px",color:"white"},className:"login-hero",children:[e.jsxs(T.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},children:[e.jsxs("div",{style:{fontSize:"48px",fontWeight:"800",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("span",{style:{color:"white"},children:"Tech"}),e.jsx("span",{style:{color:"#3b82f6"},children:"Orbit"})]}),e.jsxs("h1",{style:{fontSize:"36px",lineHeight:"1.2",marginBottom:"30px",fontWeight:"bold"},children:["Experience the Future ",e.jsx("br",{})," of Shopping."]}),e.jsxs("ul",{style:{fontSize:"18px",color:"#94a3b8",lineHeight:"2"},children:[e.jsx("li",{children:"✓ AI-Powered Recommendations"}),e.jsx("li",{children:"✓ Live Delivery Tracking"}),e.jsx("li",{children:"✓ Visual Search Technology"})]})]}),e.jsx("div",{style:{position:"absolute",top:"-10%",left:"-10%",width:"400px",height:"400px",borderRadius:"50%",background:"rgba(37, 99, 235, 0.1)",filter:"blur(80px)"}}),e.jsx("div",{style:{position:"absolute",bottom:"-10%",right:"50%",width:"300px",height:"300px",borderRadius:"50%",background:"rgba(59, 130, 246, 0.1)",filter:"blur(60px)"}})]}),e.jsx("div",{style:{width:"45%",minWidth:"400px",background:"var(--surface)",display:"flex",alignItems:"center",justifyContent:"center",padding:"40px"},children:e.jsxs("div",{style:{width:"100%",maxWidth:"380px"},children:[e.jsx("h2",{style:{fontSize:"28px",fontWeight:"800",marginBottom:"40px",color:"var(--text-main)"},children:n==="email"?l?"Welcome back":"Create an account":"Phone Login"}),e.jsxs("div",{style:{display:"flex",gap:"15px",marginBottom:"30px"},children:[e.jsx("button",{onClick:()=>c("email"),style:{paddingBottom:"5px",border:"none",background:"none",borderBottom:n==="email"?"2px solid #2563eb":"2px solid transparent",color:n==="email"?"#2563eb":"var(--text-light)",fontWeight:"bold",cursor:"pointer"},children:"Email"}),e.jsx("button",{onClick:()=>c("phone"),style:{paddingBottom:"5px",border:"none",background:"none",borderBottom:n==="phone"?"2px solid #2563eb":"2px solid transparent",color:n==="phone"?"#2563eb":"var(--text-light)",fontWeight:"bold",cursor:"pointer"},children:"Phone Code"})]}),e.jsxs("form",{onSubmit:u,style:{display:"flex",flexDirection:"column",gap:"15px"},children:[n==="email"&&e.jsxs(e.Fragment,{children:[!l&&g===0&&e.jsx("input",{type:"text",placeholder:"Full Name",required:!0,value:o.name,onChange:r=>s({...o,name:r.target.value}),style:{padding:"15px",borderRadius:"8px",border:"1px solid var(--border)",background:"var(--surface-hover)",color:"var(--text-main)"}}),g===0?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"email",placeholder:"Email address",required:!0,value:o.email,onChange:r=>s({...o,email:r.target.value}),style:{padding:"15px",borderRadius:"8px",border:"1px solid var(--border)",background:"var(--surface-hover)",color:"var(--text-main)"}}),e.jsx("input",{type:"password",placeholder:"Password",required:!0,value:o.password,onChange:r=>s({...o,password:r.target.value}),style:{padding:"15px",borderRadius:"8px",border:"1px solid var(--border)",background:"var(--surface-hover)",color:"var(--text-main)"}}),e.jsx("div",{style:{textAlign:"right",marginTop:"-10px"},children:e.jsx("a",{href:"/#/forgot-password",style:{fontSize:"13px",color:"#3b82f6",textDecoration:"none"},children:"Forgot Password?"})})]}):e.jsx("input",{type:"text",placeholder:"Enter 4-digit OTP",required:!0,value:o.otp,onChange:r=>s({...o,otp:r.target.value}),style:{padding:"15px",borderRadius:"8px",border:"1px solid var(--border)",textAlign:"center",letterSpacing:"4px",background:"var(--surface)",fontSize:"20px"}})]}),n==="phone"&&(g===0?e.jsx("input",{type:"tel",placeholder:"Phone Number",required:!0,value:o.phone,onChange:r=>s({...o,phone:r.target.value}),style:{padding:"15px",borderRadius:"8px",border:"1px solid var(--border)",background:"var(--surface)"}}):e.jsx("input",{type:"text",placeholder:"Enter OTP (1234)",required:!0,value:o.otp,onChange:r=>s({...o,otp:r.target.value}),style:{padding:"15px",borderRadius:"8px",border:"1px solid var(--border)",textAlign:"center",letterSpacing:"4px",background:"var(--surface)"}})),e.jsx("button",{className:"btn btn-primary",style:{padding:"15px",marginTop:"10px",fontSize:"16px",borderRadius:"8px"},children:n==="email"?l?"Sign In":g===1?"Verify & Create Account":"Get Verification Code":g===0?"Send Code":"Verify"})]}),n==="email"&&e.jsxs("div",{style:{marginTop:"30px"},children:[e.jsx("div",{style:{width:"100%",height:"1px",background:"#e2e8f0",marginBottom:"30px",position:"relative"},children:e.jsx("span",{style:{position:"absolute",top:"-10px",left:"50%",transform:"translateX(-50%)",background:"var(--surface)",padding:"0 10px",color:"var(--text-light)",fontSize:"12px"},children:"OR CONTINUE WITH"})}),e.jsx(O,{})]}),e.jsxs("p",{style:{marginTop:"30px",textAlign:"center",color:"#64748b"},children:[l?"Don't have an account?":"Already have an account?"," ",e.jsx("span",{onClick:()=>h(!l),style:{color:"#2563eb",fontWeight:"bold",cursor:"pointer"},children:l?"Sign up":"Sign in"})]})]})}),e.jsx("style",{children:`
                @media (max-width: 900px) {
                    .login-hero { display: none !important; }
                    .login-container { width: 100% !important; }
                }
            `})]})};export{I as default};
